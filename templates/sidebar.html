<!-- Universal Left Sidebar Navigation Component -->
<div class="sidebar">
  <div class="sidebar-header">
    <h1 class="sidebar-title">ðŸŽµ YouTube Player</h1>
    <div class="server-info">
      PID: <span id="server-pid">{{ server_info.pid if server_info else 'N/A' }}</span> | Started: <span id="server-start-time">{{ server_info.start_time if server_info else 'N/A' }}</span><br>
      Current: <span id="server-current-time">{{ server_info.current_time if server_info else 'N/A' }}</span> | Uptime: <span id="server-uptime">{{ server_info.uptime if server_info else 'N/A' }}</span>
    </div>
  </div>
  
  <nav>
    <ul class="nav-menu">
      <!-- Main Content Section -->
      <li class="nav-item">
        <a href="/" class="nav-link {{ 'active' if request.endpoint in ['playlists', 'playlists_page'] else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 9h13l3-3v12l-3-3H3z"></path>
              <path d="M9 21v-6"></path>
            </svg>
          </span>
          Home / Playlists
        </a>
      </li>
      <li class="nav-item">
        <a href="/tracks" class="nav-link {{ 'active' if request.endpoint == 'tracks' else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path>
            </svg>
          </span>
          Track Library
        </a>
      </li>
      <li class="nav-item">
        <a href="/events" class="nav-link {{ 'active' if request.endpoint == 'events' else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
            </svg>
          </span>
          Events
        </a>
      </li>
      <li class="nav-item">
        <a href="/channels" class="nav-link {{ 'active' if request.endpoint == 'channels' else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="20" height="15" x="2" y="3" rx="2" ry="2"></rect>
              <circle cx="8" cy="21" r="1"></circle>
              <circle cx="16" cy="21" r="1"></circle>
            </svg>
          </span>
          Channels
        </a>
      </li>
      <li class="nav-item">
        <a href="/jobs" class="nav-link {{ 'active' if request.endpoint == 'jobs' else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"></path>
              <path d="M12 16.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"></path>
              <path d="M12 10.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"></path>
              <path d="M9 7 7 9l2 2 4.5-4.5L15 5l-6 2Z"></path>
              <path d="M9 17 7 15l2-2-4.5-4.5L3 7l6 2Z"></path>
            </svg>
          </span>
          Job Queue
        </a>
      </li>
      <li class="nav-item">
        <a href="/deleted" class="nav-link {{ 'active' if request.endpoint == 'deleted' else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="3,6 5,6 21,6"></polyline>
              <path d="m19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2"></path>
            </svg>
          </span>
          Deleted Tracks
        </a>
      </li>
      <li class="nav-item">
        <a href="/remote" class="nav-link {{ 'active' if request.endpoint == 'remote' else '' }}">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="14" height="20" x="5" y="2" rx="2" ry="2"></rect>
              <path d="M12 18h.01"></path>
            </svg>
          </span>
          Remote Control
        </a>
      </li>
      
      <!-- System Management Section -->
      <li class="nav-item nav-dropdown">
        <a href="#" class="nav-link dropdown-toggle {{ 'active' if request.endpoint in ['settings', 'maintenance_page', 'files', 'logs', 'backups'] else '' }}" onclick="toggleDropdown(event)">
          <span class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
          </span>
          System Management
          <span class="dropdown-arrow">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6,9 12,15 18,9"></polyline>
            </svg>
          </span>
        </a>
        <ul class="nav-submenu">
          <li class="nav-subitem">
            <a href="/settings" class="nav-sublink {{ 'active' if request.endpoint == 'settings' else '' }}">
              <span class="nav-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="3"></circle>
                  <path d="M12 1v6m0 6v6"></path>
                  <path d="m15.5 3.5-3 3 3 3"></path>
                  <path d="m6.5 15.5 3-3-3-3"></path>
                  <path d="m20.5 8.5-3 3 3 3"></path>
                  <path d="m3.5 15.5 3-3-3-3"></path>
                </svg>
              </span>
              Settings
            </a>
          </li>
          <li class="nav-subitem">
            <a href="/maintenance" class="nav-sublink {{ 'active' if request.endpoint == 'maintenance_page' else '' }}">
              <span class="nav-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                </svg>
              </span>
              Maintenance
            </a>
          </li>
          <li class="nav-subitem">
            <a href="/files" class="nav-sublink {{ 'active' if request.endpoint == 'files' else '' }}">
              <span class="nav-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"></path>
                </svg>
              </span>
              Browse Files
            </a>
          </li>
          <li class="nav-subitem">
            <a href="/logs" class="nav-sublink {{ 'active' if request.endpoint == 'logs' else '' }}">
              <span class="nav-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                  <polyline points="14,2 14,8 20,8"></polyline>
                  <line x1="16" y1="13" x2="8" y2="13"></line>
                  <line x1="16" y1="17" x2="8" y2="17"></line>
                  <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
              </span>
              Logs
            </a>
          </li>
          <li class="nav-subitem">
            <a href="/backups" class="nav-sublink {{ 'active' if request.endpoint == 'backups' else '' }}">
              <span class="nav-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="13" r="8"></circle>
                  <path d="M5 7a1 1 0 0 1 1-1h4l1-2h2l1 2h4a1 1 0 0 1 1 1v2.5"></path>
                  <path d="M12 17.5V10l-2 2"></path>
                  <path d="m12 10 2 2"></path>
                </svg>
              </span>
              Backups
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>
</div>

<!-- Dropdown Menu JavaScript -->
<script>
function toggleDropdown(event) {
  event.preventDefault();
  const dropdown = event.target.closest('.nav-dropdown');
  const isOpen = dropdown.classList.contains('open');
  
  // Close all other dropdowns
  document.querySelectorAll('.nav-dropdown.open').forEach(item => {
    if (item !== dropdown) {
      item.classList.remove('open');
    }
  });
  
  // Toggle current dropdown
  dropdown.classList.toggle('open', !isOpen);
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
  if (!event.target.closest('.nav-dropdown')) {
    document.querySelectorAll('.nav-dropdown.open').forEach(item => {
      item.classList.remove('open');
    });
  }
});

// Keep dropdown open if one of its sublinks is active
document.addEventListener('DOMContentLoaded', function() {
  const activeSublink = document.querySelector('.nav-sublink.active');
  if (activeSublink) {
    const dropdown = activeSublink.closest('.nav-dropdown');
    if (dropdown) {
      dropdown.classList.add('open');
    }
  }
});

// Dynamic server info updates
function updateServerInfo() {
  fetch('/api/server_info')
    .then(response => response.json())
    .then(data => {
      const currentTimeElement = document.getElementById('server-current-time');
      const uptimeElement = document.getElementById('server-uptime');
      
      if (currentTimeElement) {
        currentTimeElement.textContent = data.current_time;
      }
      if (uptimeElement) {
        uptimeElement.textContent = data.uptime;
      }
    })
    .catch(error => {
      console.log('Failed to update server info:', error);
    });
}

// Update server info every second
document.addEventListener('DOMContentLoaded', function() {
  updateServerInfo(); // Initial update
  setInterval(updateServerInfo, 1000); // Update every second
});
</script> 