<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Play History</title>
  <style>
    body{font-family:Arial, sans-serif;background:#111;color:#eee;margin:20px;}
    h1{margin-bottom:20px;}
    table{width:100%;border-collapse:collapse;}
    th,td{padding:6px 8px;border:1px solid #444;font-size:14px;}
    th{background:#222;}
    tr:nth-child(even){background:#1a1a1a;}
    a{color:#61dafb;text-decoration:none;}
    
    /* Event type styling */
    .event-start{color:#4caf50;font-weight:bold;} /* Green for start */
    .event-finish{color:#2196f3;font-weight:bold;} /* Blue for finish */
    .event-play{color:#8bc34a;} /* Light green for play/resume */
    .event-pause{color:#ff9800;} /* Orange for pause */
    .event-next{color:#9c27b0;} /* Purple for next */
    .event-prev{color:#9c27b0;} /* Purple for prev */
    .event-like{color:#e91e63;} /* Pink for like */
    .event-removed{color:#f44336;} /* Red for removed */
    .event-backup_created{color:#607d8b;} /* Gray for backup */
    
    .position-time{font-family:monospace;color:#aaa;font-size:12px;}
  </style>
</head>
<body>
  <h1>Play History</h1>
  <p>
    <a href="/">← Back to Home</a>
    {% if page > 1 %}
      | <a href="/history?page={{ page - 1 }}">« Prev</a>
    {% endif %}
    {% if has_next %}
      | <a href="/history?page={{ page + 1 }}">Next »</a>
    {% endif %}
  </p>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Video ID</th>
        <th>Title</th>
        <th>Event</th>
        <th>Timestamp</th>
        <th>Pos (s)</th>
      </tr>
    </thead>
    <tbody>
      {% for h in history %}
        <tr>
          <td>{{ loop.index }}</td>
          <td><a href="https://youtu.be/{{ h['video_id'] }}" target="_blank">{{ h['video_id'] }}</a></td>
          <td>{{ h['name'] or '-' }}</td>
          <td><span class="event-{{ h['event'] }}">{{ h['event'] }}</span></td>
          <td>{{ h['ts'] }}</td>
          <td class="position-time">{% if h.get('position') is not none %}{{ '%.1f' % h.get('position') }}s{% else %}-{% endif %}</td>
        </tr>
      {% else %}
        <tr><td colspan="6">No history yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html> 