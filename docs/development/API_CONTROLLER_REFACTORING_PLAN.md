# API Controller Refactoring Plan

**Created:** 2025-01-21 18:30 UTC  
**Status:** ‚è≥ PLANNING  
**Completion:** 0% (0/25 major tasks)

---

## üìã **OVERVIEW**

–†–∞–∑–±–∏–µ–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ `api_controller.py` (2203 —Å—Ç—Ä–æ–∫–∏) –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.

**–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –û–¥–∏–Ω —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç 2203 —Å—Ç—Ä–æ–∫–∏
- –°–º–µ—à–∞–Ω—ã —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã API (–ø–ª–µ–π–ª–∏—Å—Ç—ã, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å—Ç—Ä–∏–º–∏–Ω–≥, –∫–∞–Ω–∞–ª—ã, –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞–Ω–∏–π)
- –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
- –£—Å–ª–æ–∂–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–¶–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**
- –†–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –º–æ–¥—É–ª—è–º
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤  
- –£–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞

---

## üéØ **PHASE 1: FOUNDATION & PLANNING** ‚è≥ **IN PROGRESS**

### ‚è≥ 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π
- [ ] **–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É:** `controllers/api/`
- [ ] **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥—É–ª–∏:** 11 —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ + –≥–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
- [ ] **–°–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã:** –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] **–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Blueprint'—ã:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- **Status:** ‚è≥ **PLANNING**

### ‚è≥ 1.2 –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] **–û–±—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã:** –í—ã–¥–µ–ª–∏—Ç—å –≤ shared.py
- [ ] **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** ROOT_DIR, PLAYER_STATE, COMMAND_QUEUE
- [ ] **–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** _format_file_size –∏ –¥—Ä—É–≥–∏–µ
- [ ] **–ú–µ–∂–º–æ–¥—É–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **Status:** ‚è≥ **TODO**

---

## üèóÔ∏è **PHASE 2: SHARED COMPONENTS** ‚è≥ **PLANNED**

### ‚è≥ 2.1 –°–æ–∑–¥–∞–Ω–∏–µ shared.py
- [ ] **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** ROOT_DIR, PLAYER_STATE, COMMAND_QUEUE (—Å—Ç—Ä–æ–∫–∏ 21-35)
- [ ] **–û–±—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã:** –í—Å–µ import'—ã (—Å—Ç—Ä–æ–∫–∏ 1-20)
- [ ] **–§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:** init_api_controller() (—Å—Ç—Ä–æ–∫–∏ 36-45)
- [ ] **–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** _format_file_size() (—Å—Ç—Ä–æ–∫–∏ 655-670)
- **Status:** ‚è≥ **TODO**

### ‚è≥ 2.2 –°–æ–∑–¥–∞–Ω–∏–µ __init__.py (–≥–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä)
- [ ] **Blueprint –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- [ ] **URL –ø—Ä–µ—Ñ–∏–∫—Å—ã:** –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö sub-blueprint'–æ–≤
- [ ] **–§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:** –ü—Ä–æ–∫—Å–∏ –¥–ª—è init_api_controller
- [ ] **–≠–∫—Å–ø–æ—Ä—Ç API:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è app.py
- **Status:** ‚è≥ **TODO**

---

## üìÇ **PHASE 3: BASE MODULES** ‚è≥ **PLANNED**

### ‚è≥ 3.1 base_api.py - –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (6 —à—Ç—É–∫):**
  - `/tracks` (—Å—Ç—Ä–æ–∫–∏ 47-70)
  - `/playlists` (—Å—Ç—Ä–æ–∫–∏ 72-75)
  - `/active_downloads` (—Å—Ç—Ä–æ–∫–∏ 77-80)
  - `/scan` (—Å—Ç—Ä–æ–∫–∏ 82-87)
  - `/backup` (—Å—Ç—Ä–æ–∫–∏ 89-120)
  - `/backups` (—Å—Ç—Ä–æ–∫–∏ 122-140)
  - `/event` (—Å—Ç—Ä–æ–∫–∏ 142-165)
- **Status:** ‚è≥ **TODO**

### ‚è≥ 3.2 volume_api.py - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ (–ø—Ä–æ—Å—Ç–æ–π –º–æ–¥—É–ª—å)
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (2 —à—Ç—É–∫–∏):**
  - `/volume/get` (—Å—Ç—Ä–æ–∫–∏ 975-990)
  - `/volume/set` (—Å—Ç—Ä–æ–∫–∏ 992-1040)
- [ ] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **Status:** ‚è≥ **TODO**

### ‚è≥ 3.3 seek_api.py - –°–æ–±—ã—Ç–∏—è –ø–æ–∏—Å–∫–∞ (–ø—Ä–æ—Å—Ç–æ–π –º–æ–¥—É–ª—å)
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (1 —à—Ç—É–∫–∞):**
  - `/seek` (—Å—Ç—Ä–æ–∫–∏ 1045-1110)
- [ ] **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:** –ú–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Status:** ‚è≥ **TODO**

---

## üì± **PHASE 4: MEDIUM MODULES** ‚è≥ **PLANNED**

### ‚è≥ 4.1 streaming_api.py - –°—Ç—Ä–∏–º–∏–Ω–≥
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (4 —à—Ç—É–∫–∏):**
  - `/streams` (—Å—Ç—Ä–æ–∫–∏ 515-525)
  - `/create_stream` (—Å—Ç—Ä–æ–∫–∏ 527-545)
  - `/stream_event/<stream_id>` (—Å—Ç—Ä–æ–∫–∏ 547-560)
  - `/stream_feed/<stream_id>` (—Å—Ç—Ä–æ–∫–∏ 562-590)
- **Status:** ‚è≥ **TODO**

### ‚è≥ 4.2 browser_api.py - –ë—Ä–∞—É–∑–µ—Ä —Ñ–∞–π–ª–æ–≤
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (2 —à—Ç—É–∫–∏):**
  - `/browse` (—Å—Ç—Ä–æ–∫–∏ 592-653)
  - `/download_file/<path:filepath>` (—Å—Ç—Ä–æ–∫–∏ 672-690)
- [ ] **–£—Ç–∏–ª–∏—Ç—ã:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è _format_file_size –∏–∑ shared.py
- **Status:** ‚è≥ **TODO**

### ‚è≥ 4.3 system_api.py - –°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (2 —à—Ç—É–∫–∏):**
  - `/restart` (—Å—Ç—Ä–æ–∫–∏ 422-470)
  - `/stop` (—Å—Ç—Ä–æ–∫–∏ 472-510)
- [ ] **Threading –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–æ—Ç–æ–∫–∞–º–∏
- **Status:** ‚è≥ **TODO**

---

## üéµ **PHASE 5: COMPLEX MODULES** ‚è≥ **PLANNED**

### ‚è≥ 5.1 playlist_api.py - –†–∞–±–æ—Ç–∞ —Å –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (3 —à—Ç—É–∫–∏):**
  - `/add_playlist` (—Å—Ç—Ä–æ–∫–∏ 167-310) - —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å threading
  - `/resync` (—Å—Ç—Ä–æ–∫–∏ 312-395) - worker —Ñ—É–Ω–∫—Ü–∏–∏
  - `/link_playlist` (—Å—Ç—Ä–æ–∫–∏ 397-420)
- [ ] **Threading —Ñ—É–Ω–∫—Ü–∏–∏:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å _worker —Ñ—É–Ω–∫—Ü–∏–π
- **Status:** ‚è≥ **TODO**

### ‚è≥ 5.2 remote_api.py - –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (12 —à—Ç—É–∫):**
  - `/remote/status` (—Å—Ç—Ä–æ–∫–∏ 695-715)
  - `/remote/play` (—Å—Ç—Ä–æ–∫–∏ 717-730)
  - `/remote/next` (—Å—Ç—Ä–æ–∫–∏ 732-745)
  - `/remote/prev` (—Å—Ç—Ä–æ–∫–∏ 747-760)
  - `/remote/stop` (—Å—Ç—Ä–æ–∫–∏ 762-775)
  - `/remote/volume` (—Å—Ç—Ä–æ–∫–∏ 777-825)
  - `/remote/like` (—Å—Ç—Ä–æ–∫–∏ 827-850)
  - `/remote/shuffle` (—Å—Ç—Ä–æ–∫–∏ 852-870)
  - `/remote/youtube` (—Å—Ç—Ä–æ–∫–∏ 872-885)
  - `/remote/fullscreen` (—Å—Ç—Ä–æ–∫–∏ 887-895)
  - `/remote/sync_internal` (—Å—Ç—Ä–æ–∫–∏ 897-910)
  - `/remote/commands` (—Å—Ç—Ä–æ–∫–∏ 912-925)
  - `/remote/load_playlist` (—Å—Ç—Ä–æ–∫–∏ 927-970)
- [ ] **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å PLAYER_STATE, COMMAND_QUEUE
- **Status:** ‚è≥ **TODO**

---

## üé¨ **PHASE 6: LARGE MODULES** ‚è≥ **PLANNED**

### ‚è≥ 6.1 channels_api.py - –°–∏—Å—Ç–µ–º–∞ –∫–∞–Ω–∞–ª–æ–≤
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (11 —à—Ç—É–∫):**
  - `/channel_groups` (—Å—Ç—Ä–æ–∫–∏ 1115-1130)
  - `/channels/<int:group_id>` (—Å—Ç—Ä–æ–∫–∏ 1132-1150)
  - `/create_channel_group` (—Å—Ç—Ä–æ–∫–∏ 1152-1200)
  - `/add_channel` (—Å—Ç—Ä–æ–∫–∏ 1202-1380) - —Å–ª–æ–∂–Ω–∞—è threading –ª–æ–≥–∏–∫–∞
  - `/sync_channel_group/<int:group_id>` (—Å—Ç—Ä–æ–∫–∏ 1382-1450)
  - `/sync_channel/<int:channel_id>` (—Å—Ç—Ä–æ–∫–∏ 1452-1520)
  - `/refresh_channel_stats/<int:channel_id>` (—Å—Ç—Ä–æ–∫–∏ 1522-1590)
  - `/deleted_tracks` (—Å—Ç—Ä–æ–∫–∏ 1592-1610)
  - `/restore_track` (—Å—Ç—Ä–æ–∫–∏ 1612-1650)
  - `/delete_track` (—Å—Ç—Ä–æ–∫–∏ 1652-1780) - —Å–ª–æ–∂–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
  - `/remove_channel/<int:channel_id>` (—Å—Ç—Ä–æ–∫–∏ 1782-1850)
- [ ] **–°–ª–æ–∂–Ω—ã–µ worker —Ñ—É–Ω–∫—Ü–∏–∏:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å threading –ª–æ–≥–∏–∫–∏
- **Status:** ‚è≥ **TODO**

### ‚è≥ 6.2 jobs_api.py - –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞–Ω–∏–π
- [ ] **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (6 —à—Ç—É–∫):**
  - `GET /jobs` (—Å—Ç—Ä–æ–∫–∏ 1855-1920)
  - `POST /jobs` (—Å—Ç—Ä–æ–∫–∏ 1922-1970)
  - `GET /jobs/<int:job_id>` (—Å—Ç—Ä–æ–∫–∏ 1972-2010)
  - `POST /jobs/<int:job_id>/retry` (—Å—Ç—Ä–æ–∫–∏ 2012-2050)
  - `DELETE /jobs/<int:job_id>` (—Å—Ç—Ä–æ–∫–∏ 2052-2085)
  - `GET /jobs/queue/status` (—Å—Ç—Ä–æ–∫–∏ 2087-2110)
  - `GET /jobs/logs/<int:job_id>` (—Å—Ç—Ä–æ–∫–∏ 2112-2150)
- [ ] **Enum –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** JobType, JobStatus, JobPriority
- **Status:** ‚è≥ **TODO**

---

## üîó **PHASE 7: INTEGRATION & TESTING** ‚è≥ **PLANNED**

### ‚è≥ 7.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ app.py
- [ ] **–ò–º–ø–æ—Ä—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** –° `api_controller` –Ω–∞ `api`
- [ ] **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤ init_api_controller
- [ ] **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π import
- **Status:** ‚è≥ **TODO**

### ‚è≥ 7.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π
- [ ] **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ –æ–¥–Ω–æ–º—É –º–æ–¥—É–ª—é
- [ ] **–ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:** –í—Å–µ URL'—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] **Threading –ø—Ä–æ–≤–µ—Ä–∫–∞:** Worker —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ shared state
- **Status:** ‚è≥ **TODO**

### ‚è≥ 7.3 –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
- [ ] **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–∞–π–ª–∞:** api_controller.py
- [ ] **–ò–º–ø–æ—Ä—Ç –æ—á–∏—Å—Ç–∫–∞:** –£–±—Ä–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- [ ] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ README
- **Status:** ‚è≥ **TODO**

---

## üìã **DETAILED BREAKDOWN**

### –ú–æ–¥—É–ª–∏ –ø–æ —Ä–∞–∑–º–µ—Ä—É (—Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞):
1. **channels_api.py** - ~700 —Å—Ç—Ä–æ–∫ (—Å–∞–º—ã–π –±–æ–ª—å—à–æ–π)
2. **remote_api.py** - ~275 —Å—Ç—Ä–æ–∫ 
3. **playlist_api.py** - ~250 —Å—Ç—Ä–æ–∫
4. **jobs_api.py** - ~250 —Å—Ç—Ä–æ–∫
5. **base_api.py** - ~150 —Å—Ç—Ä–æ–∫
6. **browser_api.py** - ~100 —Å—Ç—Ä–æ–∫
7. **seek_api.py** - ~65 —Å—Ç—Ä–æ–∫
8. **volume_api.py** - ~65 —Å—Ç—Ä–æ–∫
9. **streaming_api.py** - ~75 —Å—Ç—Ä–æ–∫
10. **system_api.py** - ~90 —Å—Ç—Ä–æ–∫
11. **shared.py** - ~50 —Å—Ç—Ä–æ–∫
12. **__init__.py** - ~30 —Å—Ç—Ä–æ–∫

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. **–í—ã—Å–æ–∫–∏–π:** shared.py, __init__.py, volume_api.py (–ø—Ä–æ—Å—Ç—ã–µ)
2. **–°—Ä–µ–¥–Ω–∏–π:** base_api.py, seek_api.py, browser_api.py
3. **–°–ª–æ–∂–Ω—ã–π:** streaming_api.py, system_api.py, playlist_api.py
4. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π:** remote_api.py, channels_api.py, jobs_api.py (–±–æ–ª—å—à–∏–µ)

---

## üõ°Ô∏è **RISK MITIGATION**

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏:
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã** –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- **Threading –ø—Ä–æ–±–ª–µ–º—ã** –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ worker —Ñ—É–Ω–∫—Ü–∏–π
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏
- **Blueprint –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã** –∏–º—ë–Ω URL'–æ–≤

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏:
- **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ** —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
- **–í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å—Ç–∞—Ä–æ–≥–æ api_controller.py
- **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** before refactoring
- **Rollback –ø–ª–∞–Ω** –≤ —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

---

## üìä **CURRENT STATUS**

### ‚è≥ **Planned (0%)**
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- [ ] 11 —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã
- [ ] ~2200 —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞
- [ ] 65 API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

### üéØ **Next Steps**
1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `controllers/api/`
2. –°–æ–∑–¥–∞—Ç—å `shared.py` —Å –æ–±—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
3. –ù–∞—á–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–¥—É–ª–µ–π (volume_api.py, seek_api.py)
4. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–æ–∂–Ω—ã–º –º–æ–¥—É–ª—è–º
5. –û–±–Ω–æ–≤–∏—Ç—å app.py –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~4-6 —á–∞—Å–æ–≤ (–ø–æ—ç—Ç–∞–ø–Ω–æ)  
**–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞:** –ú–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –º–æ–¥—É–ª–∏ –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ 